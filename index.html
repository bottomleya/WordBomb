<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <link href="https://fonts.googleapis.com/css?family=Raleway:300,400,500" rel="stylesheet">
        <link rel="stylesheet" href="css/style.css">

        <script src="js/jquery-3.4.1.min.js"></script>

        <title>WordBomb | Play with friends!</title>
        
        <script>
            var timerCall = null;
            function startGame(e) {
                innerCard = document.getElementById("innerCard");
                innerCard.style.transform = 'rotateY(180deg)';
                startTimer();
            }
            
            function resetGame(e) {
                innerCard = document.getElementById("innerCard");
                innerCard.style.transform = 'rotateY(0deg)';
            }
            function getNewLetters(e) {
                innerCard = document.getElementById("innerCard");
                innerCard.style.transform = 'rotateY(180deg)';
                // https://www.sporcle.com/games/furman/trigraph/results
                let listOfLetters = ['AND','ING','ION','ENT','EST','ONE','FOR','THI','THR','TIO','INE','GHT','OUR','STO','IVE','TWO','EEN','ORT','EVE','TOP','ATI','TEE','FOU','NTH','WEN','NIN','VEN','TWE','NTY','HRE']
                selectLetters = listOfLetters[Math.floor(Math.random()*listOfLetters.length)];
                document.getElementById("text-letters").innerHTML = selectLetters;
                innerCard.style.transform = 'rotateY(-180deg)';
            }
            function startTimer(e) {
                $("#flip-card").toggleClass("active-animatioon")
                timerCall = setInterval(function() {
                    timer.innerHTML = timer.innerHTML - 1;
                    if (parseInt(timer.innerHTML,10) < 1) {
                        stopTimer();   
                    }
                }, 1000);
            }
            function stopTimer(e) {
                $("#flip-card").toggleClass("active-animatioon");
                $("#timer").innerHTML = "30"
                clearInterval(timerCall);
                
                innerCard = document.getElementById("innerCard");
                innerCard.style.transform = 'rotateY(0deg)';
            }
            
            function removePlayer() {
                console.log(this);//elem.parentNode.removeChild(elem);
                this.parentNode.removeChild(this);
                //this.parentNode.remove();
            }
            function addPlayer(e) {
                var newPlayerName = document.getElementById("newPlayerInput").value;
                if (newPlayerName != "") {
                    var newPlayerElement = document.createElement("p");
                    newPlayerElement.innerHTML = newPlayerName;
                    newPlayerElement.addEventListener("click", removePlayer, false);
                    newPlayerElement.onclick = "removePlayer(this)";
                    $("#playerList").append(newPlayerElement);
                }
            }
        </script>
        
        
    </head>
    <body>
    <div class="heading">
        <button id="btnStartGame" type="button" href='javascript:void();' onclick="startGame(event)">Click to Start Game</button>
        <button id="btnResetGame" type="button" href='javascript:void();' onclick="resetGame(event)">Click to Reset Game</button>
        <button id="btnNewLetters" type="button" href='javascript:void();' onclick="getNewLetters(event)">Click to get new letters</button>
    </div>
        
    <div id="flip-card" class="flip-card ">
      <div id="innerCard" class="flip-card-inner">
          
        <div class="flip-card-front">
          <h2>WordBomb</h2>
          <button class="add-player-button" visibility="hidden"></button>
          <label class="custom-field">
              <input id="newPlayerInput" type="text"/>
              <span class="placeholder">Enter Player</span>
          </label>
          <button id="addPlayerBtn" class="add-player-button" onclick="addPlayer(event)">&#43;</button>
          <div id="playerList" class="playerList">  
          </div>
        </div>  
          
        <div class="flip-card-back">
            <div id="timer" class="timer">30</div>
          <p>Your letters are...</p>
          <h1 id="text-letters">INT</h1>
          <p> and can be used... </p>
          <a id="start-text" class="wordSection-Active">Start</a><a>&#x25CF;</a>
          <a id="middle-text" class="wordSection-Active"> Middle</a><a>&#x25CF;</a>
          <a id = "end-text" class="wordSection-Inactive">End</a>
        </div>
      </div>
    </div>
        
    </body>
    
    <script>
               
    document.getElementById("newPlayerInput").keypress(function(event){
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if(keycode == '13'){
            addPlayer(event); 
        }
    });
        
    </script>
</html>
